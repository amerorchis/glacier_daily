<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Glacier National Park Daily Update</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #3e2f13;
            background-color: #f5f7f2;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            background: #ffffff;
            border-radius: 12px;
            padding: 25px 30px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .sub-card {
            background: #f5f7f2;
            border-radius: 8px;
            padding: 15px 18px;
            margin-bottom: 12px;
        }

        .sub-card:last-child {
            margin-bottom: 0;
        }

        .section-header {
            border-left: 4px solid #6c8d3b;
            padding-left: 15px;
            margin-bottom: 20px;
        }

        .section-header.orange {
            border-left-color: #a85900;
        }

        .section-header.teal {
            border-left-color: #028CA9;
        }

        .section-header.blue {
            border-left-color: #5eade0;
        }

        .section-header.dark-green {
            border-left-color: #546d41;
        }

        .section-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #028CA9;
            margin: 0 0 3px;
            font-weight: 600;
        }

        .section-label.orange {
            color: #a85900;
        }

        .section-label.green {
            color: #6c8d3b;
        }

        .section-label.dark-green {
            color: #546d41;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #3e2f13;
            margin: 0;
        }

        .section-title a {
            color: #3e2f13;
            text-decoration: none;
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            color: #3e2f13;
            margin: 15px 0 10px;
        }

        h2 {
            font-size: 14px;
            font-weight: 600;
            color: #546d41;
            margin: 0 0 8px;
        }

        .header-card {
            text-align: center;
            border-bottom: none;
        }

        .header-card img {
            max-width: 220px;
            height: auto;
        }

        .header-info {
            font-size: 14px;
            color: #444444;
            margin: 15px 0 0;
        }

        .header-info a {
            color: #028CA9;
        }

        .date-display {
            font-size: 36px;
            font-weight: 700;
            color: #3e2f13;
            line-height: 1.1;
        }

        .content-text {
            font-size: 14px;
            line-height: 1.7;
            color: #444444;
        }

        .two-column {
            display: flex;
            gap: 16px;
        }

        .column {
            flex: 1;
        }

        .column .card {
            height: 100%;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .weather-img {
            max-width: 65%;
            display: block;
            margin: 15px auto;
        }

        .section-img {
            display: block;
            margin: 20px 0;
            width: 100%;
        }

        .disclaimer {
            font-size: 11px;
            color: #888888;
            font-style: italic;
            margin-top: 15px;
            line-height: 1.5;
        }

        .disclaimer a {
            color: #888888;
        }

        .button-row {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .button {
            background: #f5f7f2;
            border-radius: 6px;
            padding: 10px 16px;
            font-size: 12px;
            font-weight: 600;
            color: #546d41;
            text-decoration: none;
        }

        .button.primary {
            background: #a85900;
            color: #ffffff;
        }

        .footer-card {
            background: #3e2f13;
            text-align: center;
            color: #c9c4bc;
        }

        .footer-card p {
            margin: 0 0 8px;
            font-size: 12px;
        }

        .footer-card .org-name {
            font-size: 14px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 12px;
        }

        .footer-card a {
            color: #ffffff;
        }

        li:not(:last-child) {
            margin-bottom: 4px;
        }

        @media print {
            body {
                font-size: 11pt;
                background: white;
                padding: 0;
            }

            .card {
                box-shadow: none;
                border: 1px solid #e5e5e5;
                break-inside: avoid;
            }

            a {
                text-decoration: none;
                color: #333;
            }

            .two-column {
                break-inside: avoid;
            }
        }
    </style>
</head>

<body>
    <!-- Header Card -->
    <div class="card header-card">
        <a href="http://glacier.org/">
            <img src="https://www.dripuploads.com/uploads/image_upload/image/3049526/embeddable_9e5a933a-16c8-4a46-a560-16a94a8ea61b.png"
                width="220" height="54" alt="GNPC Logo">
        </a>
        <h1>Glacier National Park Daily Update</h1>
        <p class="header-info">
            Brought to you by the Glacier National Park Conservancy, the official fundraising partner
            for Glacier National Park. Learn more at <a href="https://glacier.org/daily-updates">glacier.org</a>.
            <br>Last Updated: {{ my.daily_update.timestring }}.
            <br><strong>Sign up to receive this in your inbox daily at <a
                    href="https://glacier.org/daily-updates">glacier.org/daily-updates</a>.</strong>
        </p>
    </div>

    <!-- Date Card -->
    <div class="card">
        <div class="section-header">
            <p class="section-label">WHAT YOU NEED TO KNOW</p>
            <p class="date-display">{{ my.daily_update.today | base64_decode }}</p>
        </div>
    </div>

    <!-- Events Card (Conditional) -->
    {% if my.daily_update.events != "" %}
        {% if my.daily_update.events | base64_decode != "502 Response" %}
    <div class="card">
        <div class="section-header orange">
            <p class="section-label orange">TODAY</p>
            <p class="section-title"><a href="https://www.nps.gov/glac/planyourvisit/calendar.htm">Park Activities</a></p>
        </div>
        <div class="content-text">
            {{ my.daily_update.events | base64_decode }}
        </div>
    </div>
        {% endif %}
    {% endif %}

    <!-- Weather Card -->
    <div class="card">
        <div class="section-header blue">
            <p class="section-label">FORECAST</p>
            <p class="section-title"><a href="https://www.weather.gov/">Today's Weather</a></p>
        </div>
        <p class="content-text">{{ my.daily_update.weather1 | base64_decode }}</p>
        <img class="weather-img" src="{{ my.daily_update.weather_image | base64_decode }}"
            alt="Today's weather forecast in Glacier">
        <div class="content-text">{{ my.daily_update.weather2 | base64_decode }}</div>
        <p class="disclaimer">Air quality data from <a
                href="https://www.nps.gov/subjects/air/current-data.htm?site=glac&location=west-glacier-horse-stables&">the
                National Park Service</a>.</p>
    </div>

    <!-- Conditions Card -->
    <div class="card">
        <div class="section-header dark-green">
            <p class="section-label dark-green">CONDITIONS</p>
            <p class="section-title"><a href="https://www.nps.gov/glac/planyourvisit/road-trail-campground-status.htm">Trails, Roads & Campgrounds</a></p>
        </div>

        <div class="sub-card">
            <h2>Trail Closures</h2>
            <div class="content-text">{{ my.daily_update.trails | base64_decode }}</div>
        </div>

        {% if my.daily_update.roads != "" %}
        <div class="sub-card">
            <h2>Road Closures</h2>
            <div class="content-text">{{ my.daily_update.roads | base64_decode }}</div>
        </div>
        {% endif %}

        {% if my.daily_update.hikerbiker != "" %}
        <div class="sub-card">
            <h2>Going-to-the-Sun Road Hiker/Biker Closures</h2>
            <div class="content-text">{{ my.daily_update.hikerbiker | base64_decode }}</div>
        </div>
        {% endif %}

        {% if my.daily_update.campgrounds != "" %}
        <div class="sub-card">
            <h2>Campground Status</h2>
            <div class="content-text">{{ my.daily_update.campgrounds | base64_decode }}</div>
        </div>
        {% endif %}

        <p class="disclaimer">Trail, road, and campground conditions can change throughout the day. Check the <a
                href="https://www.nps.gov/glac/planyourvisit/road-trail-campground-status.htm">NPS website</a> for
            the latest.</p>
    </div>

    <!-- Two-Column: Notices & Peak -->
    <div class="two-column">
        <div class="column">
            <div class="card">
                <div class="section-header orange">
                    <p class="section-label orange">DAILY</p>
                    <p class="section-title"><a href="https://glacier.org">Notices</a></p>
                </div>
                <div class="content-text">{{ my.daily_update.notices | base64_decode }}</div>
            </div>
        </div>
        <div class="column">
            <div class="card">
                <div class="section-header">
                    <p class="section-label green">FEATURED</p>
                    <p class="section-title"><a href="{{ my.daily_update.peak_image | base64_decode }}">Peak of the Day</a></p>
                </div>
                <a href="{{ my.daily_update.peak_image | base64_decode }}">
                    <img class="section-img" src="{{ my.daily_update.peak_image | base64_decode }}" alt="Glacier Peak of the Day">
                </a>
                <p class="content-text">{{ my.daily_update.peak | base64_decode }}</p>
                <div class="button-row">
                    <a class="button" href="{{ my.daily_update.peak_image | base64_decode }}">Full Size</a>
                    <a class="button" href="{{ my.daily_update.peak_map | base64_decode }}">View Map</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Two-Column: Product & Image of the Day -->
    <div class="two-column">
        <div class="column">
            <div class="card">
                <div class="section-header teal">
                    <p class="section-label">FROM THE SHOP</p>
                    <p class="section-title"><a href="{{ my.daily_update.product_link | base64_decode }}">{{ my.daily_update.product_title | base64_decode }}</a></p>
                </div>
                <a href="{{ my.daily_update.product_link | base64_decode }}">
                    <img class="section-img" src="{{ my.daily_update.product_image | base64_decode }}" alt="Today's product of the day">
                </a>
                <p class="content-text">{{ my.daily_update.product_desc | base64_decode }}</p>
                <div class="button-row">
                    <a class="button primary" href="{{ my.daily_update.product_link | base64_decode }}">Shop Now</a>
                </div>
            </div>
        </div>
        <div class="column">
            {% if my.daily_update.image_otd | base64_decode != "Flickr API Error" %}
            <div class="card">
                <div class="section-header blue">
                    <p class="section-label">PHOTOGRAPHY</p>
                    <p class="section-title"><a href="{{ my.daily_update.image_otd_link | base64_decode }}">Image of the Day</a></p>
                </div>
                <a href="{{ my.daily_update.image_otd_link | base64_decode }}">
                    <img class="section-img" src="{{ my.daily_update.image_otd | base64_decode }}" alt="Today's picture of the day">
                </a>
                {% if my.daily_update.image_otd_title != "" %}
                <p class="content-text"><strong>{{ my.daily_update.image_otd_title | base64_decode }}</strong></p>
                {% endif %}
                <p class="disclaimer">Image courtesy of <a href="{{ my.daily_update.image_otd_link | base64_decode }}">Glacier National
                        Park</a>.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Sunrise Card (Conditional) -->
    {% if my.daily_update.sunrise_vid != "" and my.daily_update.sunrise_still != "" %}
    <div class="card">
        <div class="section-header orange">
            <p class="section-label orange">TIMELAPSE</p>
            <p class="section-title"><a href="{{ my.daily_update.sunrise_vid | base64_decode }}">{{ my.daily_update.sunrise_str | base64_decode }} Sunrise</a></p>
        </div>
        <a href="{{ my.daily_update.sunrise_vid | base64_decode }}">
            <img class="section-img" src="{{ my.daily_update.sunrise_still | base64_decode }}"
                alt="{{ my.daily_update.sunrise_str | base64_decode }} Sunrise">
        </a>
        <p class="content-text" style="text-align: center;">Find the timelapse video at <a href="https://glacier.org/daily-updates">glacier.org/daily-updates</a>.</p>
    </div>
    {% endif %}

    <!-- Footer Card -->
    <div class="card footer-card">
        <p class="org-name">Glacier National Park Conservancy</p>
        <p>Website: <a href="http://glacier.org/">glacier.org</a></p>
    </div>
</body>

</html>
