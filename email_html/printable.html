<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Glacier National Park Daily Update</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.7;
            color: #444444;
            max-width: 600px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
        }

        .header {
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .header img {
            display: block;
            margin-bottom: 20px;
        }

        .date-title {
            font-size: 36px;
            font-weight: 300;
            color: #3e2f13;
            margin: 0 0 8px;
            line-height: 1.1;
        }

        .subtitle {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #028CA9;
            margin: 0;
            font-weight: 600;
        }

        .last-updated {
            font-size: 12px;
            color: #666666;
            margin: 0 0 20px;
        }

        .section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }

        .section:last-child {
            border-bottom: none;
        }

        .category-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
            margin: 0 0 8px;
        }

        .category-activities { color: #a85900; }
        .category-weather { color: #028CA9; }
        .category-conditions { color: #546d41; }
        .category-notices { color: #a85900; }
        .category-featured { color: #6c8d3b; }
        .category-shop { color: #028CA9; }
        .category-photography { color: #5eade0; }
        .category-timelapse { color: #a85900; }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #3e2f13;
            margin: 0 0 20px;
            line-height: 1.3;
        }

        .section-title a {
            color: #3e2f13;
            text-decoration: none;
        }

        .subsection-title {
            font-size: 14px;
            font-weight: 600;
            color: #3e2f13;
            margin: 0 0 10px;
        }

        p {
            font-size: 14px;
            line-height: 1.7;
            color: #444444;
            margin: 0 0 12px;
        }

        ul {
            margin: 0 0 20px;
            padding-left: 20px;
            font-size: 14px;
            line-height: 1.7;
            color: #444444;
        }

        ul.events-list {
            margin-bottom: 25px;
        }

        li:not(:last-child) {
            margin-bottom: 4px;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }

        .weather-img {
            max-width: 65%;
            height: auto;
            display: block;
            margin: 0 auto 20px;
        }

        .two-column {
            display: flex;
            justify-content: space-between;
        }

        .column {
            width: 48%;
        }

        .disclaimer {
            font-size: 11px;
            color: #888888;
            font-style: italic;
            line-height: 1.5;
        }

        .disclaimer a {
            color: #888888;
        }

        .meta-link {
            font-size: 12px;
            color: #666666;
        }

        .meta-link a {
            color: #6c8d3b;
        }

        .footer {
            padding-top: 20px;
            margin-top: 10px;
        }

        .footer p {
            font-size: 14px;
            font-weight: 600;
            color: #3e2f13;
            margin: 0 0 5px;
        }

        .footer a {
            color: #6c8d3b;
        }

        a {
            color: #028CA9;
        }

        @media print {
            body {
                font-size: 11pt;
                padding: 0;
            }

            a {
                text-decoration: none;
                color: #444444;
            }

            .header {
                page-break-after: avoid;
            }

            .section {
                page-break-inside: avoid;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <p class="last-updated">
            <strong>Last Updated: {{ my.daily_update.timestring }}.</strong>
            Check <a href="https://www.nps.gov/glac/index.htm">nps.gov/glac</a> for the latest.
        </p>
        <a href="http://glacier.org/">
            <img src="https://www.dripuploads.com/uploads/image_upload/image/3049526/embeddable_9e5a933a-16c8-4a46-a560-16a94a8ea61b.png"
                width="200" height="49" alt="GNPC Logo">
        </a>
        <p class="date-title">{{ my.daily_update.today }}</p>
        <p class="subtitle">GLACIER NATIONAL PARK CONDITIONS</p>
    </div>

    {% if my.daily_update.events.events or my.daily_update.events.seasonal_message %}
        {% if not my.daily_update.events.error_message %}
    <div class="section">
        <p class="category-label category-activities">ACTIVITIES</p>
        <p class="section-title">
            <a href="https://www.nps.gov/glac/planyourvisit/calendar.htm">Park Activities Today</a>
        </p>
        {% if my.daily_update.events.events %}
        <ul class="events-list">
            {% for event in my.daily_update.events.events %}
            <li>{{ event.start_time }} - {{ event.end_time }}: {{ event.name }}, {{ event.location }} <a href="{{ event.link }}" style="font-size: 10px; font-style: italic; text-decoration: underline;">(link)</a></li>
            {% endfor %}
        </ul>
        {% elif my.daily_update.events.seasonal_message %}
        <p>{{ my.daily_update.events.seasonal_message }}</p>
        {% endif %}
    </div>
        {% endif %}
    {% endif %}

    <div class="section">
        <p class="category-label category-weather">WEATHER</p>
        <p class="section-title">
            <a href="https://www.weather.gov/">Today's Forecast</a>
        </p>
        <p>{{ my.daily_update.weather.daylight_message }}<br><br>Forecasts Around the Park:</p>
        <img class="weather-img" src="{{ my.daily_update.weather_image }}"
            alt="Today's weather forecast in Glacier">
        {% if my.daily_update.weather.aqi_value != None %}
        <p>The current AQI in West Glacier is {{ my.daily_update.weather.aqi_value }}. This air quality is considered {{ my.daily_update.weather.aqi_category }}</p>
        {% endif %}
        <p>Evening Viewing Forecasts:<br>
            Aurora: {{ my.daily_update.weather.aurora_quality }} |
            Sunset Color: {{ my.daily_update.weather.sunset_quality }} |
            Cloud Cover: {{ my.daily_update.weather.cloud_cover_pct }}%</p>
        {% if my.daily_update.weather.aurora_message or my.daily_update.weather.sunset_message %}
        <p>{{ my.daily_update.weather.aurora_message }} {{ my.daily_update.weather.sunset_message }}</p>
        {% endif %}
        {% if my.daily_update.weather.alerts %}
        <p class="subsection-title">
            <a href="https://weather.gov">Alerts from the National Weather Service</a>
        </p>
        <ul>
            {% for alert in my.daily_update.weather.alerts %}
            <li>{{ alert.headline }}
                {% if alert.bullets %}
                <ul>
                    {% for b in alert.bullets %}<li>{{ b }}</li>{% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        <p class="disclaimer">Air quality data from <a href="https://www.nps.gov/subjects/air/current-data.htm?site=glac&location=west-glacier-horse-stables&">the National Park Service</a>.</p>
    </div>

    <div class="section">
        <p class="category-label category-conditions">CONDITIONS</p>
        <p class="section-title">
            <a href="https://www.nps.gov/glac/planyourvisit/road-trail-campground-status.htm">Trails, Roads & Campgrounds</a>
        </p>

        <p class="subsection-title">Trail Closures</p>
        {% if my.daily_update.trails.closures %}
        <ul>
            {% for c in my.daily_update.trails.closures %}<li>{{ c }}</li>{% endfor %}
        </ul>
        {% elif my.daily_update.trails.no_closures_message %}
        <p>{{ my.daily_update.trails.no_closures_message }}</p>
        {% elif my.daily_update.trails.error_message %}
        <p>{{ my.daily_update.trails.error_message }}</p>
        {% endif %}

        {% if my.daily_update.roads.closures or my.daily_update.roads.no_closures_message or my.daily_update.roads.error_message %}
        <p class="subsection-title">Road Closures</p>
        {% if my.daily_update.roads.closures %}
        <ul>
            {% for c in my.daily_update.roads.closures %}<li>{{ c }}</li>{% endfor %}
        </ul>
        {% elif my.daily_update.roads.no_closures_message %}
        <p>{{ my.daily_update.roads.no_closures_message }}</p>
        {% elif my.daily_update.roads.error_message %}
        <p>{{ my.daily_update.roads.error_message }}</p>
        {% endif %}
        {% endif %}

        {% if my.daily_update.hikerbiker.closures %}
        <p class="subsection-title">Going-to-the-Sun Road Hiker/Biker Closures</p>
        <ul>
            {% for c in my.daily_update.hikerbiker.closures %}<li>{{ c }}</li>{% endfor %}
        </ul>
        {% if my.daily_update.hikerbiker.explanatory_note %}
        <p>{{ my.daily_update.hikerbiker.explanatory_note }}</p>
        {% endif %}
        {% endif %}

        {% if my.daily_update.campgrounds.statuses or my.daily_update.campgrounds.error_message %}
        <p class="subsection-title">Campground Status</p>
        {% if my.daily_update.campgrounds.statuses %}
        <ul>
            {% for s in my.daily_update.campgrounds.statuses %}<li>{{ s }}</li>{% endfor %}
        </ul>
        {% elif my.daily_update.campgrounds.error_message %}
        <p>{{ my.daily_update.campgrounds.error_message }}</p>
        {% endif %}
        {% endif %}

        <p class="disclaimer">Trail, road, and campground condition information provided by Glacier National Park's official website. Conditions can change throughout the day. Check the <a href="https://www.nps.gov/glac/planyourvisit/index.htm">park's website</a> for the latest information.</p>
    </div>

    <div class="section">
        <p class="category-label category-notices">NOTICES</p>
        <p class="section-title">
            <a href="https://glacier.org">Daily Updates</a>
        </p>
        {% if my.daily_update.notices.notices %}
        <ul>
            {% for n in my.daily_update.notices.notices %}<li>{{ n }}</li>{% endfor %}
        </ul>
        {% elif my.daily_update.notices.fallback_message %}
        <p>{{ my.daily_update.notices.fallback_message }}</p>
        {% endif %}
    </div>

    <div class="section two-column">
        <div class="column">
            <p class="category-label category-featured">FEATURED</p>
            <p class="section-title">
                <a href="{{ my.daily_update.peak_image }}">Glacier Peak of the Day</a>
            </p>
            <img src="{{ my.daily_update.peak_image }}" alt="Glacier Peak of the Day">
            <p>{{ my.daily_update.peak }}</p>
            <p class="meta-link">
                <a href="{{ my.daily_update.peak_image }}">Full size image</a> &middot;
                <a href="{{ my.daily_update.peak_map }}">View on map</a>
            </p>
        </div>
        <div class="column">
            <p class="category-label category-shop">FROM THE SHOP</p>
            <p class="section-title">
                <a href="{{ my.daily_update.product_link }}">{{ my.daily_update.product_title }}</a>
            </p>
            <img src="{{ my.daily_update.product_image }}" alt="Today's product of the day">
            <p>{{ my.daily_update.product_desc }}</p>
            <p class="meta-link">
                <a href="{{ my.daily_update.product_link }}" style="color: #a85900; font-weight: 600;">Shop now &rarr;</a>
            </p>
        </div>
    </div>

    {% if my.daily_update.image_otd != "Flickr API Error" %}
    <div class="section">
        <p class="category-label category-photography">PHOTOGRAPHY</p>
        <p class="section-title">
            <a href="{{ my.daily_update.image_otd_link }}">Glacier Image of the Day</a>
        </p>
        <img src="{{ my.daily_update.image_otd }}" alt="Today's picture of the day" style="max-width: 65%; display: block; margin: 0 auto 15px;">
        {% if my.daily_update.image_otd_title != "" %}
        <p>{{ my.daily_update.image_otd_title }}</p>
        {% endif %}
        <p class="meta-link">Image courtesy of <a href="{{ my.daily_update.image_otd_link }}">Glacier National Park</a>.</p>
    </div>
    {% endif %}

    {% if my.daily_update.sunrise_vid != "" and my.daily_update.sunrise_still != "" %}
    <div class="section">
        <p class="category-label category-timelapse">TIMELAPSE</p>
        <p class="section-title">
            <a href="{{ my.daily_update.sunrise_vid }}">{{ my.daily_update.sunrise_str }} Sunrise</a>
        </p>
        <a href="{{ my.daily_update.sunrise_vid }}"><img
                src="{{ my.daily_update.sunrise_still }}" alt="{{ my.daily_update.sunrise_str }} Sunrise"></a>
        <p>Click to watch the timelapse video of the sunrise.</p>
    </div>
    {% endif %}

    <div class="footer">
        <p>Glacier National Park Conservancy</p>
        <p style="font-weight: 400; font-size: 12px;"><a href="http://glacier.org/">glacier.org</a></p>
    </div>
</body>

</html>
